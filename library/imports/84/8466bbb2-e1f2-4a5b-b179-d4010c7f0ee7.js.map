{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\game/assets\\Script\\game\\loading.js"],"names":["globel","require","cc","Class","extends","Component","properties","loaderBar","ProgressBar","percentText","type","Label","default","loadFunc","self","loader","onProgress","completedCound","totalCount","item","perFloor","per","Math","floor","progress","string","director","preloadScene","loadScene","onLoad","game","setFrameRate","userLogin","wx","login","success","getUserInfo","userInfo","res","avatarUrl","start"],"mappings":";;;;;;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,mBAAUL,GAAGM,WADL;AAERC,qBAAY;AACRC,kBAAKR,GAAGS,KADA;AAERC,qBAAQ;AAFA;AAFJ,KAFP;;AAUL;AACAC,cAAS,oBAAU;AACf,YAAIC,OAAO,IAAX;AACAZ,WAAGa,MAAH,CAAUC,UAAV,GAAuB,UAASC,cAAT,EAAwBC,UAAxB,EAAmCC,IAAnC,EAAwC;AAC3D,gBAAIC,WAAWH,iBAAeC,UAA9B;AACA,gBAAIG,MAAMC,KAAKC,KAAL,CAAWN,iBAAe,GAAf,GAAmBC,UAA9B,CAAV;AACAJ,iBAAKP,SAAL,CAAeiB,QAAf,GAA0BJ,QAA1B,CAH2D,CAGnB;AACxCN,iBAAKL,WAAL,CAAiBgB,MAAjB,GAA0BJ,MAAI,GAA9B,CAJ2D,CAIvB;AAEvC,SAND;;AAQAnB,WAAGwB,QAAH,CAAYC,YAAZ,CAAyB,YAAzB,EAAsC,YAAU;AAAI;AAChDzB,eAAGa,MAAH,CAAUC,UAAV,GAAsB,IAAtB,CAD4C,CACZ;AAChCd,eAAGwB,QAAH,CAAYE,SAAZ,CAAsB,YAAtB,EAF4C,CAEJ;AAC3C,SAHD;AAKH,KA1BI;AA2BLC,UA3BK,oBA2BK;AACN3B,WAAG4B,IAAH,CAAQC,YAAR,CAAqB,EAArB,EADM,CACoB;AAC1B,aAAKC,SAAL,GAFM,CAEc;AACvB,KA9BI;;AA+BL;AACAA,eAAU,qBAAU;AAChB,YAAIlB,OAAO,IAAX;AACAmB,WAAGC,KAAH,CAAS;AACLC,qBAAS,mBAAY;AACrBF,mBAAGG,WAAH,CAAe;AACXD,6BAAQ,sBAAM;AACVnC,+BAAOqC,QAAP,GAAkBC,IAAID,QAAtB,CADU,CACsB;AAChCrC,+BAAOuC,SAAP,GAAmBD,IAAID,QAAJ,CAAaE,SAAhC;AACAzB,6BAAKD,QAAL;AACH;AALU,iBAAf;AAQC;AAVI,SAAT;AAaH,KA/CI;;AAmDL2B,WAAM,iBAAW,CAChB;;AAED;AAtDK,CAAT","file":"loading.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\game","sourcesContent":["\r\nlet globel = require(\"globel\"); \r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        loaderBar:cc.ProgressBar,\r\n        percentText:{\r\n            type:cc.Label,\r\n            default:null\r\n       },\r\n    },\r\n\r\n    // 加载资源\r\n    loadFunc:function(){\r\n        var self = this;\r\n        cc.loader.onProgress = function(completedCound,totalCount,item){\r\n            var perFloor = completedCound/totalCount;\r\n            var per = Math.floor(completedCound*100/totalCount);\r\n            self.loaderBar.progress = perFloor;     // 复制给组件里得progress\r\n            self.percentText.string = per+\"%\" ; // 转成百分比\r\n           \r\n        };\r\n\r\n        cc.director.preloadScene('chooseSite',function(){   // 预加载场景\r\n            cc.loader.onProgress= null;     // 清除上一次的进度\r\n            cc.director.loadScene('chooseSite');    // 跳转场景\r\n        });\r\n        \r\n    },\r\n    onLoad () {\r\n        cc.game.setFrameRate(30); // 设fbs为30\r\n        this.userLogin();   // 调用登陆授权方法\r\n    },\r\n    // 登录授权\r\n    userLogin:function(){\r\n        var self = this;\r\n        wx.login({\r\n            success: function () {\r\n            wx.getUserInfo({\r\n                success:res =>{\r\n                    globel.userInfo = res.userInfo; // 将用户信息等复制给全局变量\r\n                    globel.avatarUrl = res.userInfo.avatarUrl;\r\n                    self.loadFunc();\r\n                }\r\n            })\r\n\r\n            }\r\n        });\r\n   \r\n    },\r\n\r\n\r\n\r\n    start:function() {\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}