{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\dolls/assets\\Script\\dolls\\dollsMove.js"],"names":["http","require","globel","tools","cc","Class","name","properties","id","itemName","iconSF","SpriteFrame","extends","Component","speed","dollList","type","Node","default","reverseList","pigPrefab","Prefab","pandaPrefab","bearPrefab","ToolsSpriteFrame","onLoad","playerlist","replayerlist","dollsList","is_httpConect","dollsinit","redollsList","list","self","i","children","length","siteNum","player","instantiate","addChild","prizeType","typeArr","dolls","dollsSkin","brand","getChildByName","wallet","gold","destroy","getComponent","Sprite","spriteFrame","Label","string","listdata","start","update","dt","s","x","j"],"mappings":"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","file":"dollsMove.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\dolls","sourcesContent":["var http = require(\"http\");\r\nvar globel = require(\"globel\");\r\nvar tools = cc.Class({ // 道具\r\n    name: 'tools',\r\n    properties: {\r\n        id: 0,\r\n        itemName: '',\r\n        iconSF: cc.SpriteFrame\r\n    }\r\n});\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        speed:0,\r\n        dollList:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        reverseList:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        pigPrefab:{\r\n            type:cc.Prefab,\r\n            default:null\r\n        },\r\n        pandaPrefab:{\r\n            type:cc.Prefab,\r\n            default:null\r\n        },\r\n        bearPrefab:{\r\n            type:cc.Prefab,\r\n            default:null\r\n        },\r\n        ToolsSpriteFrame:{\r\n            type:tools,\r\n            default:[]\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n   \r\n    onLoad:function() {\r\n        this.playerlist();\r\n        this.replayerlist();\r\n       \r\n    },\r\n    playerlist:function () { // 正方向娃娃\r\n        var dollsList = this.dollList;\r\n        if(globel.is_httpConect){\r\n            this.dollsinit(dollsList); \r\n        }\r\n    },\r\n    replayerlist:function () { // 反方向娃娃\r\n        var redollsList = this.reverseList;\r\n        if(globel.is_httpConect){\r\n            this.dollsinit(redollsList); \r\n        }\r\n    },\r\n    dollsinit:function(list){\r\n        var self = this;\r\n        for(var i = 0;i<list.children.length;i++){ //遍历数据长度\r\n            switch(globel.siteNum){ // 根据不同场复制不同预制体\r\n                case 1: var player = cc.instantiate(this.pigPrefab);break;  // 复制预制体\r\n                case 2: var player = cc.instantiate(this.pandaPrefab);break;  // 复制预制体\r\n                case 3: var player = cc.instantiate(this.bearPrefab);break;  // 复制预制体\r\n            }\r\n            list.children[i].addChild(player); // 把预制体加入playerRoot \r\n            let prizeType = globel.typeArr[i]; // 获取娃娃的数据\r\n            let dolls = list.children[i].children[0]; // 娃娃节点\r\n            this.dollsSkin(list,dolls,prizeType,i); // 显示不同数据\r\n        };\r\n      \r\n    },\r\n    dollsSkin:function(list,dolls,prizeType,i){\r\n        var self = this;\r\n        let brand = dolls.getChildByName(\"brand\");       // 礼品节点，放置奖品图          \r\n        let wallet = dolls.getChildByName(\"wallet\");     // 钱包节点，放置金币等\r\n        let gold = dolls.getChildByName(\"gold\");       // 话费节点，放置话费\r\n        switch(prizeType[0]){\r\n            case \"gift\": wallet.destroy(); // 销毁钱包节点\r\n                    gold.destroy(); // 销毁话费节点\r\n                    // for (var g in self.ToolsSpriteFrame){\r\n                        // if(this.typeArr[i][1].id == self.ToolsSpriteFrame[g].id){\r\n                            // brand.children[0].getComponent(cc.Sprite).spriteFrame = self.ToolsSpriteFrame[g].iconSF;\r\n                            brand.children[0].getComponent(cc.Sprite).spriteFrame = self.ToolsSpriteFrame[0].iconSF;\r\n                            brand.children[1].getComponent(cc.Label).string = globel.typeArr[i][1].name;\r\n                            \r\n                        // }\r\n                    // }\r\n                    break;\r\n            case \"gold\": brand.destroy();  // 销毁礼品节点\r\n                    gold.destroy(); // 销毁话费节点\r\n                        wallet.children[0].getComponent(cc.Label).string = self.listdata[0].children[i].name;\r\n                   \r\n                    break; \r\n            case \"zhuanshi\": brand.destroy();  // 销毁礼品节点\r\n                    wallet.destroy(); // 销毁钱包节点 \r\n                        gold.children[0].getComponent(cc.Label).string = self.listdata[0].children[i].name;        \r\n                  \r\n                    break;\r\n        }\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update:function(dt){\r\n        this.speed = 100;\r\n        var s = this.speed * dt;\r\n        for(var i = 0;i<this.dollList.children.length;i++){\r\n          this.dollList.children[i].x += s;\r\n        };\r\n        for(var j = 0;j<this.reverseList.children.length;j++){\r\n            this.reverseList.children[j].x -= s;\r\n        }\r\n       \r\n    },\r\n});\r\n"]}