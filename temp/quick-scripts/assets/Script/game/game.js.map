{"version":3,"sources":["game.js"],"names":["globel","require","service","cc","Class","extends","Component","properties","back","type","Node","default","StartBtn","siteName","clip","clipSkin","SpriteFrame","rope","ropeSkin","tableExit","pigSkin","pandaSkin","bearSkin","bg_bottom0","bg_bottom1","winAlert","backPage","branch","branchLabel","Label","goldLabel","energyBar","clipdollsRoot","winSound","url","AudioClip","errorSound","win","clipTrueDialog","clipPlayer","winAlertShow","w1","moveTo","p","runAction","onLoad","siteNum","game","setFrameRate","init","self","director","preloadScene","on","loadScene","console","log","is_throwing","progressLoad","getComponent","ProgressBar","progress","ropeAction1","randomY","Math","round","random","ropeAction1_1","ropeAction1_3","callFunc","c1","rotateTo","c2","c3","c4","c5","c6","c7","cseq","sequence","clipPlayAnimate1","clipAnimate","Animation","play","clipPlayAnimate2","clipTrue","mid_func","collider","clipGifts","prizeName","skin","Clipdolls","Sprite","spriteFrame","active","gift","string","count","Number","branch_fadeIn","fadeIn","branch_move1","moveBy","branch_fadeOut","fadeOut","branch_move2","branch_hide","doll_delay","delayTime","skin2","doll_skin","doll_scale","scaleTo","doll_playSound","playWinSound","doll_dialog","dialog_show","backPagePositon","getPosition","doll_move","easeMoveTo","easing","easeCircleActionInOut","doll_destory","destroy","dollSeq","back_delay","back_dump","jumpBy","backSeq","playErrorSound","removeFromParent","seq","scheduleOnce","bind","end_func","ropeAction2","ropeSeq","ClipSeq","RichText","start","audioEngine","playEffect","update","dt"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\game","sourcesContent":["var globel = require(\"globel\");\r\nvar service = require(\"service\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        back:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        StartBtn:{ //开始按钮\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        siteName:cc.Node,\r\n        clip:{ // 夹子\r\n            type:cc.Node,\r\n            default:[]\r\n        },\r\n        clipSkin:{ // 夹子皮肤\r\n            type: cc.SpriteFrame,\r\n            default:[]\r\n        },\r\n        rope:{ // 绳子\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        ropeSkin:{ // 绳子皮肤\r\n            type: cc.SpriteFrame,\r\n            default:[]\r\n        },\r\n        tableExit:{ // 娃娃机洞口\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        pigSkin:{\r\n            type: cc.SpriteFrame,\r\n            default:[]\r\n        },\r\n        pandaSkin:{\r\n            type: cc.SpriteFrame,\r\n            default:[]\r\n        },\r\n        bearSkin:{\r\n            type: cc.SpriteFrame,\r\n            default:[]\r\n        },\r\n        bg_bottom0:{ // 底层\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        bg_bottom1:{ // 底层\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        winAlert:{ \r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        backPage:{ // 背包\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        branch:{ // 豆分\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        branchLabel:{ // 夹中的豆分\r\n            type:cc.Label,\r\n            default:null\r\n        },\r\n        goldLabel:{ // 金豆框里的豆分\r\n            type:cc.Label,\r\n            default:null\r\n        },\r\n        energyBar:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        clipdollsRoot:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        winSound:{\r\n            url:cc.AudioClip,\r\n            default:null\r\n        },\r\n        errorSound:{\r\n            url:cc.AudioClip,\r\n            default:null\r\n        },\r\n        win:1,\r\n        clipTrueDialog:{\r\n            type:cc.Node,\r\n            default:null\r\n        },\r\n        clipPlayer:{\r\n            type:cc.Node,\r\n            default:null\r\n        }\r\n\r\n    },\r\n    // 中奖信息弹框\r\n    winAlertShow(){\r\n        if(this.win){\r\n            let w1 = cc.moveTo(0.5,cc.p(-490,100));\r\n            this.winAlert.runAction(w1);\r\n        }\r\n    },\r\n    \r\n    onLoad:function () {\r\n        let siteNum = globel.siteNum; // 选的是什么场;\r\n        cc.game.setFrameRate(30); // 设fbs为30\r\n        this.winAlertShow(); //调用函数\r\n        this.init(siteNum);\r\n        let self = this;\r\n        cc.director.preloadScene(\"chooseSite\");\r\n        this.back.on(\"touchstart\",function(){\r\n            cc.director.loadScene(\"chooseSite\");\r\n        });\r\n        \r\n        this.StartBtn.on(\"touchstart\",function(){\r\n            console.log(self.is_throwing );\r\n            self.progressLoad = self.energyBar.getComponent(cc.ProgressBar); // 能量条\r\n            self.progressLoad.progress -=0.35; // 每夹一次减0.35\r\n            if(self.is_throwing){\r\n                return;\r\n            }\r\n            else{\r\n                /***绳子***/\r\n                self.is_throwing = true;\r\n                let ropeAction1 = cc.moveTo(0.7,cc.p(0,200)); // 绳子落下\r\n                let randomY = Math.round(Math.random()*100+320);\r\n                console.log(randomY);\r\n                let ropeAction1_1 = cc.moveTo(0.5,cc.p(0,randomY)); // 绳子返回到半空\r\n\r\n                let ropeAction1_3 = cc.callFunc(function(){\r\n                    let c1 = cc.rotateTo(0.1,15);\r\n                    let c2 = cc.rotateTo(0.2,-13);\r\n                    let c3 = cc.rotateTo(0.2,10);\r\n                    let c4 = cc.rotateTo(0.2,-10);\r\n                    let c5 = cc.rotateTo(0.2,13);\r\n                    let c6 = cc.rotateTo(0.2,-15);\r\n                    let c7 = cc.rotateTo(0.2,0);\r\n                    let cseq = cc.sequence(c1,c2,c3,c4,c5,c6,c7);\r\n                    self.clip.runAction(cseq);\r\n                });\r\n\r\n                /****夹子****/\r\n               \r\n                var clipPlayAnimate1 = cc.callFunc(function(){\r\n                    var clipAnimate = self.clip.getComponent(cc.Animation);\r\n                    if(siteNum == 1){\r\n                        clipAnimate.play(\"woodClip\");\r\n                    }\r\n                    else if(siteNum == 2){\r\n                        clipAnimate.play(\"silveryClip\");\r\n                    }\r\n                    else{\r\n                        clipAnimate.play(\"goldClip\");\r\n                    }\r\n                });\r\n\r\n                var clipPlayAnimate2 = cc.callFunc(function(){\r\n                    var clipAnimate = self.clip.getComponent(cc.Animation); // 收缩夹子\r\n                    if(siteNum == 1){\r\n                        clipAnimate.play(\"reverseWoodClip\");\r\n                    }\r\n                    else if(siteNum == 2){\r\n                        clipAnimate.play(\"reverseSilveryClip\");\r\n                    }\r\n                    else{\r\n\r\n                        clipAnimate.play(\"reverseGoldClip\");\r\n                    }\r\n                    \r\n                });\r\n                self.clipTrue = Math.round(Math.random()); // 临时变量 决定抓不抓得中\r\n\r\n                /***抓取娃娃*****/\r\n                var mid_func = cc.callFunc(function(){ \r\n                    /******如果有碰撞******/\r\n                        console.log(\"我调试：\"+self.clip.getComponent('clipCollider').collider);\r\n                        var collider  = self.clip.getComponent('clipCollider').collider\r\n                        service.clipGifts(globel.prizeName);\r\n                        // 根据场次换皮肤\r\n                        var skin = null;\r\n                        switch(siteNum){\r\n                            case 1:skin = self.pigSkin[1];break;\r\n                            case 2:skin = self.pandaSkin[1];break;\r\n                            case 3:skin = self.bearSkin[1];break;\r\n                        }\r\n                    \r\n                        if(collider){\r\n                            var Clipdolls = self.clip.getComponent('clipCollider').Clipdolls;\r\n                            Clipdolls.getComponent(cc.Sprite).spriteFrame = skin;\r\n                                /********中*************/\r\n                            if(self.clipTrue){ // this.clipTrue临时抓中变量\r\n                                    self.branch.active = true; // 显示\r\n                                    // var gift = self.clip.getComponent('clipCollider').gift; // 加的分数\r\n                                    // self.branchLabel.getComponent(cc.Label).string = gift; // 加的分数\r\n                                    var gift = 588; // 假设抓取到的分数\r\n                                    self.branch.string = gift;\r\n                                    var goldLabel = self.goldLabel.getComponent(cc.Label).string; // 总豆分\r\n                                    var count = gift+Number(goldLabel); // 相加\r\n                                    self.goldLabel.getComponent(cc.Label).string = count;\r\n                                    \r\n                                    /******** 豆分动作开始*******/\r\n                                    var branch_fadeIn = cc.fadeIn(0.1,1);      // 显示\r\n                                    var branch_move1 = cc.moveBy(0.5,cc.p(0,50)); // 分数移动50像素\r\n                                    var branch_fadeOut = cc.fadeOut(0.1,0);  // 隐藏\r\n                                    var branch_move2 = cc.moveTo(0.5,cc.p(360,285)); // 分数回到原位\r\n                                    var branch_hide = cc.callFunc(function(){\r\n                                        self.branch.active = false;  // 隐藏\r\n                                    });\r\n                                    self.branch.runAction(cc.sequence(branch_fadeIn,branch_move1,branch_fadeOut,branch_move2,branch_hide));\r\n                                    /******** 豆分动作结束*******/\r\n\r\n                                    /********  娃娃变小添加进背包动作开始*******/\r\n                                    var doll_delay = cc.delayTime(0.7);\r\n                                    var skin2 = null;\r\n                                    var doll_skin = cc.callFunc(function(){\r\n                                          // 根据场景换皮肤\r\n                                        switch(siteNum){\r\n                                            case 1:skin2 = self.pigSkin[0];break;\r\n                                            case 2:skin2 = self.pandaSkin[0];break;\r\n                                            case 3:skin2 = self.bearSkin[0];break;\r\n                                        }\r\n                                        Clipdolls.getComponent(cc.Sprite).spriteFrame = skin2;\r\n                                        console.log(skin2);\r\n                                    });\r\n                                    var doll_scale = cc.scaleTo(0.5,0.3);\r\n                                    var doll_playSound = cc.callFunc(function(){\r\n                                        self.playWinSound();\r\n                                    });\r\n                                     var doll_dialog = cc.callFunc(function(){\r\n                                        self.clipPlayer.getComponent(cc.Sprite).spriteFrame = skin2;\r\n                                        self.clipTrueDialog.getComponent(\"dialog\").dialog_show();\r\n                                    });\r\n                                  \r\n                                    var backPagePositon = self.backPage.getPosition();\r\n                                    var doll_move = cc.moveTo(0.7,backPagePositon);\r\n                                    var easeMoveTo = doll_move.easing(cc.easeCircleActionInOut());\r\n                                    var doll_destory = cc.callFunc(function(){\r\n                                        Clipdolls.destroy();\r\n                                    });\r\n                                    var dollSeq = cc.sequence(doll_delay,doll_skin,doll_scale,doll_dialog,doll_playSound,easeMoveTo,doll_destory);\r\n                                    Clipdolls.runAction(dollSeq);\r\n                                   /********  娃娃变小添加进背包动作结束*******/\r\n\r\n                                   /********  背包跳动动作开始 *******/\r\n                                    var back_delay = cc.delayTime(1.5);\r\n                                    var back_dump = cc.jumpBy(0.5,cc.p(0,0),20,2);\r\n                                    var backSeq = cc.sequence(back_delay,back_dump);\r\n                                    self.backPage.runAction(backSeq);\r\n                                     /********  背包跳动动作结束 *******/\r\n                                }\r\n                                /********不中*************/\r\n                                else{\r\n                                    self.tableExit.active = true;\r\n                                    var c1 = cc.callFunc(function(){ // 轨道上下层级关系切换\r\n                                        self.bg_bottom1.active = true; \r\n                                        self.bg_bottom0.active = false; \r\n                                    });\r\n                                    var c2 = cc.callFunc(function(){\r\n                                        self.playErrorSound();\r\n                                    });\r\n                                    var c3 =  cc.moveTo(1,cc.p(0,-475));\r\n                                    var c4 = cc.callFunc(function(){\r\n                                        Clipdolls.removeFromParent(); // 下落完后移除\r\n                                        Clipdolls.destroy(); // 销毁节点\r\n                                    });\r\n                                    var seq = cc.sequence(c1,c2,c3,c4);\r\n                                   \r\n                                    self.scheduleOnce(function(){\r\n                                        Clipdolls.runAction(seq);\r\n                                    },1)\r\n                                    \r\n                                    self.scheduleOnce(function(){\r\n                                        self.tableExit.active = false;\r\n                                    },2)\r\n                                }\r\n                         \r\n                            }\r\n                        else{\r\n                            return;\r\n                        }\r\n                }.bind(this));\r\n                \r\n                var end_func = cc.callFunc(function() {\r\n                    self.scheduleOnce(function(){\r\n                        let ropeAction2 = cc.moveTo(0.4,cc.p(0,480)); // 绳子回到原位\r\n                        self.rope.runAction(ropeAction2);\r\n                    },2);\r\n                    self.scheduleOnce(function(){\r\n                        self.is_throwing = false; // 抓取按钮可再次点击\r\n                    },2.5);\r\n                }.bind(this)); \r\n                let ropeSeq = cc.sequence(ropeAction1,ropeAction1_1,ropeAction1_3,mid_func,end_func);\r\n                self.rope.runAction(ropeSeq);\r\n                var ClipSeq = cc.sequence(clipPlayAnimate1,clipPlayAnimate2);\r\n                self.clip.runAction(ClipSeq);\r\n                \r\n\r\n            }\r\n            \r\n        })\r\n    },\r\n    init:function(siteNum){\r\n        var self = this;\r\n        this.rope.getComponent(cc.Sprite).spriteFrame = this.ropeSkin[siteNum-1];\r\n        this.clip.getComponent(cc.Sprite).spriteFrame = this.clipSkin[siteNum-1];\r\n        switch(siteNum){\r\n            case 1:self.siteName.getComponent(cc.RichText).string = '<outline color=#6b2a11 width=2><b>娱 乐 场</b></outline>';break;\r\n            case 2:self.siteName.getComponent(cc.RichText).string = '<outline color=#6b2a11 width=2><b>五 毛 场</b></outline>';break;\r\n            case 3:self.siteName.getComponent(cc.RichText).string = '<outline color=#6b2a11 width=2><b>一 元 场</b></outline>';break;\r\n        }\r\n    },\r\n    start () {\r\n\r\n    },\r\n    playWinSound:function(){\r\n        cc.audioEngine.playEffect(this.winSound,false,1); // 开始播放\r\n    },\r\n    playErrorSound:function(){\r\n        cc.audioEngine.playEffect(this.errorSound,false,1); // 开始播放\r\n    },\r\n\r\n    update (dt) {\r\n    \r\n    },\r\n});\r\n"]}