{"version":3,"sources":["packageWriter.js"],"names":["PackageWriter","_unreadCount","_position","value","_buf","length","position","buf","DataView","num","setInt8","setInt16","setInt32","setUint32","str","bufLen","utf8StrLength","writeInt16","writeUTF8Str","headerInfo","writeInt32","ctype","writeUInt32","utag","writeInt8","dataType","dataBuf","headerSize","module","exports"],"mappings":";;;;;;;;;;IAAMA;;;4BACgB;AACd,mBAAO,KAAKC,YAAZ;AACH;;;4BACc;AACX;AACA,mBAAO,KAAKC,SAAZ;AACH;0BACYC,OAAO;AAChB;AACA,iBAAKD,SAAL,GAAiBC,KAAjB;AACA,iBAAKF,YAAL,GAAoB,KAAKG,IAAL,CAAUC,MAAV,GAAmB,KAAKC,QAA5C;AACH;;;AAED,2BAAYC,GAAZ,EAAiB;AAAA;;AACb,aAAKH,IAAL,GAAY,IAAII,QAAJ,CAAaD,GAAb,CAAZ;AACA;AACA,aAAKL,SAAL,GAAiB,CAAjB;AACH;;;;kCAESO,KAAK;AACX,iBAAKL,IAAL,CAAUM,OAAV,CAAkB,KAAKJ,QAAvB,EAAiCG,GAAjC;AACA,iBAAKH,QAAL;AACH;;;mCAEUG,KAAK;AACZ,iBAAKL,IAAL,CAAUO,QAAV,CAAmB,KAAKL,QAAxB,EAAkCG,GAAlC;AACA,iBAAKH,QAAL,IAAiB,CAAjB;AACH;;;mCAEUG,KAAK;AACZ,iBAAKL,IAAL,CAAUQ,QAAV,CAAmB,KAAKN,QAAxB,EAAkCG,GAAlC;AACA,iBAAKH,QAAL,IAAiB,CAAjB;AACH;;;oCAEWG,KAAK;AACb,iBAAKL,IAAL,CAAUS,SAAV,CAAoB,KAAKP,QAAzB,EAAmCG,GAAnC;AACA,iBAAKH,QAAL,IAAiB,CAAjB;AACH;;;qCAEYQ,KAAK;AACd,gBAAIC,SAASD,IAAIE,aAAJ,EAAb;AACA,iBAAKC,UAAL,CAAgBF,MAAhB;AACA,iBAAKX,IAAL,CAAUc,YAAV,CAAuB,KAAKZ,QAA5B,EAAsCQ,GAAtC;AACA,iBAAKR,QAAL,IAAiBS,MAAjB;AACH;;;wCAEeI,YAAY;AACxB;AACA,iBAAKC,UAAL,CAAgBD,WAAWE,KAA3B;AACA,iBAAKC,WAAL,CAAiBH,WAAWI,IAA5B;AACA,iBAAKC,SAAL,CAAeL,WAAWM,QAA1B;AACH;;;kCACgBC,SAASH,MAAM;AAC5B,mBAAOG,QAAQJ,WAAR,CAAoBC,IAApB,CAAP;AACH;;;mCAEiBG,SAAS;AACvB,mBAAOA,QAAQJ,WAAR,CAAoB,CAApB,CAAP;AACH;;;;;;AAGLtB,cAAc2B,UAAd,GAA2B,CAA3B;AACAC,OAAOC,OAAP,GAAiB7B,aAAjB","file":"packageWriter.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\modules","sourcesContent":["class PackageWriter {\r\n    get unreadCount() {\r\n        return this._unreadCount;\r\n    }\r\n    get position() {\r\n        // console.log(\"位置：\",this._position);\r\n        return this._position;\r\n    }\r\n    set position(value) {\r\n        // console.log(\"\\x1B[31m%s\\x1b[39m\", \"PackageReader.position:\", value);\r\n        this._position = value;\r\n        this._unreadCount = this._buf.length - this.position;\r\n    }\r\n\r\n    constructor(buf) {\r\n        this._buf = new DataView(buf);\r\n        // this._buf = buf;\r\n        this._position = 0;\r\n    }\r\n\r\n    writeInt8(num) {\r\n        this._buf.setInt8(this.position, num);\r\n        this.position++;\r\n    }\r\n\r\n    writeInt16(num) {\r\n        this._buf.setInt16(this.position, num);\r\n        this.position += 2;\r\n    }\r\n\r\n    writeInt32(num) {\r\n        this._buf.setInt32(this.position, num);\r\n        this.position += 4;\r\n    }\r\n\r\n    writeUInt32(num) {\r\n        this._buf.setUint32(this.position, num);\r\n        this.position += 4;\r\n    }\r\n\r\n    writeUTF8Str(str) {\r\n        let bufLen = str.utf8StrLength();\r\n        this.writeInt16(bufLen);\r\n        this._buf.writeUTF8Str(this.position, str);\r\n        this.position += bufLen;\r\n    }\r\n\r\n    writeHeaderInfo(headerInfo) {\r\n        // this.writeInt16(headerInfo.stype);\r\n        this.writeInt32(headerInfo.ctype);\r\n        this.writeUInt32(headerInfo.utag);\r\n        this.writeInt8(headerInfo.dataType);\r\n    }\r\n    static writeUtag(dataBuf, utag) {\r\n        return dataBuf.writeUInt32(utag);\r\n    }\r\n\r\n    static removeUtag(dataBuf) {\r\n        return dataBuf.writeUInt32(0);\r\n    }\r\n    \r\n}\r\nPackageWriter.headerSize = 9;\r\nmodule.exports = PackageWriter;"]}